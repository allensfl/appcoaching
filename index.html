<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Mission Control - KI-Coaching App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>🎯 Coach Mission Control</h1>
                <div class="session-info">
                    <span id="currentClientDisplay">Kein Klient ausgewählt</span>
                    <span id="sessionTimer">00:00</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <button class="tab-button active" data-tab="clients">👥 Klienten</button>
            <button class="tab-button" data-tab="coaching">🎯 Coaching</button>
            <button class="tab-button" data-tab="collaboration">🤝 Kollaboration</button>
            <button class="tab-button" data-tab="templates">📋 Templates</button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- KLIENTEN TAB -->
            <div id="clients" class="tab-content active">
                <div class="tab-header">
                    <h2>Klienten auswählen</h2>
                    <p>Wählen Sie einen Klienten für Ihre Coaching-Session aus.</p>
                </div>
                
                <div id="clientsContainer" class="clients-grid">
                    <!-- Clients werden hier dynamisch geladen -->
                    <div class="client-card" onclick="selectClient('sarah')">
                        <div class="client-avatar">👩‍💼</div>
                        <div class="client-info">
                            <h3>Sarah Müller</h3>
                            <p>Projektmanagerin</p>
                            <div class="client-status status-aktiv">aktiv</div>
                        </div>
                    </div>
                    
                    <div class="client-card" onclick="selectClient('marcus')">
                        <div class="client-avatar">👨‍💼</div>
                        <div class="client-info">
                            <h3>Marcus Schmidt</h3>
                            <p>Vertriebsleiter</p>
                            <div class="client-status status-aktiv">aktiv</div>
                        </div>
                    </div>
                    
                    <div class="client-card" onclick="selectClient('lisa')">
                        <div class="client-avatar">👩‍💻</div>
                        <div class="client-info">
                            <h3>Lisa Weber</h3>
                            <p>Marketing-Direktorin</p>
                            <div class="client-status status-wartend">wartend</div>
                        </div>
                    </div>
                    
                    <div class="client-card" onclick="selectClient('werner')">
                        <div class="client-avatar">👨‍🔧</div>
                        <div class="client-info">
                            <h3>Werner Hoffmann</h3>
                            <p>IT-Leiter</p>
                            <div class="client-status status-aktiv">aktiv</div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="startSessionBtn" class="btn primary" onclick="startSession()" disabled>
                        🎯 Session starten
                    </button>
                </div>
            </div>

            <!-- COACHING TAB -->
            <div id="coaching" class="tab-content">
                <div class="coaching-workspace">
                    
                    <!-- Coach Control Panel -->
                    <div class="coach-control-panel">
                        <div class="panel-header">
                            <h3>🎯 Coach Control Panel</h3>
                            <div class="current-client-info">
                                <span id="coachingClientDisplay">Kein Klient</span>
                            </div>
                        </div>

                        <!-- 12-Phasen Navigation -->
                        <div class="phases-section">
                            <h4>12-Schritte Navigation</h4>
                            <div id="phasesContainer" class="phases-grid">
                                <div class="phase-card active" onclick="setPhase(1)" data-phase="1">
                                    <div class="phase-number blue">1</div>
                                    <div class="phase-info">
                                        <h5>Phase 1: Erstanliegen</h5>
                                        <p>GT1-GT3</p>
                                    </div>
                                </div>
                                <div class="phase-card" onclick="setPhase(2)" data-phase="2">
                                    <div class="phase-number orange">2</div>
                                    <div class="phase-info">
                                        <h5>Phase 2: Analyse</h5>
                                        <p>GT4-GT6</p>
                                    </div>
                                </div>
                                <div class="phase-card" onclick="setPhase(3)" data-phase="3">
                                    <div class="phase-number green">3</div>
                                    <div class="phase-info">
                                        <h5>Phase 3: Lösungen</h5>
                                        <p>GT7-GT9</p>
                                    </div>
                                </div>
                                <div class="phase-card" onclick="setPhase(4)" data-phase="4">
                                    <div class="phase-number purple">4</div>
                                    <div class="phase-info">
                                        <h5>Phase 4: Umsetzung</h5>
                                        <p>GT10-GT12</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Prompt Repository -->
                        <div class="prompts-section">
                            <div class="prompts-header">
                                <h4>Prompt Repository</h4>
                                <input type="text" id="promptSearch" placeholder="🔍 Prompts durchsuchen..." class="search-input">
                            </div>
                            
                            <div class="category-filters">
                                <button class="category-filter active" data-category="all">Alle</button>
                                <button class="category-filter" data-category="GT">GT</button>
                                <button class="category-filter" data-category="SF">SF</button>
                                <button class="category-filter" data-category="DIAG">DIAG</button>
                                <button class="category-filter" data-category="LÖS">LÖS</button>
                                <button class="category-filter" data-category="META">META</button>
                            </div>

                            <div id="promptsContainer" class="prompts-grid">
                                <!-- Prompts werden hier dynamisch geladen -->
                            </div>
                        </div>
                    </div>

                    <!-- Prompt Editor -->
                    <div class="prompt-editor">
                        <div class="editor-header">
                            <h3>✏️ Prompt Editor</h3>
                            <span id="phaseStatus">Phase 1: Erstanliegen</span>
                        </div>

                        <div class="editor-content">
                            <textarea id="promptTextarea" placeholder="Wählen Sie einen Prompt aus dem Repository oder schreiben Sie einen eigenen..."></textarea>
                            
                            <div class="editor-actions">
                                <button onclick="copyPromptText()" class="btn secondary">📋 Kopieren</button>
                                <button onclick="clearEditor()" class="btn secondary">🗑️ Löschen</button>
                                <button onclick="sendToCollaboration()" class="btn primary">📤 An Kollaboration senden</button>
                            </div>
                        </div>

                        <div class="editor-info">
                            <p>💡 <strong>Tipp:</strong> Verwenden Sie Ctrl+1-9 für GT1-GT9 Shortcuts</p>
                            <p>🎭 Für Spannungsfelder: <a href="https://www.delightex.com" target="_blank">DelightEx Avatar Tool</a></p>
                        </div>
                    </div>

                    <!-- Coach-KI Assistant -->
                    <div class="coach-ai-assistant">
                        <div class="assistant-header">
                            <h3>🤖 Coach-KI Assistant</h3>
                            <p>Private Beratung für Sie als Coach</p>
                        </div>

                        <div class="assistant-content">
                            <div id="coachKIOutput" class="ai-output">
                                <div class="welcome-message">
                                    <p>👋 Hallo! Ich bin Ihr KI-Assistant für den Coaching-Prozess.</p>
                                    <p>Fragen Sie mich nach Prozess-Beratung, Methoden-Tipps oder Klient-Analysen.</p>
                                </div>
                            </div>

                            <div class="assistant-input">
                                <textarea id="coachKIInput" placeholder="Fragen Sie mich alles zum Coaching-Prozess..."></textarea>
                                <div class="quick-actions">
                                    <button class="quick-action" data-action="Prozess-Beratung">📊 Prozess</button>
                                    <button class="quick-action" data-action="Methoden-Tipp">🛠️ Methoden</button>
                                    <button class="quick-action" data-action="Spannungsfeld">⚖️ Spannungsfeld</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- KOLLABORATION TAB -->
            <div id="collaboration" class="tab-content">
                <div class="collaboration-header">
                    <h2>🤝 Kollaboration</h2>
                    <div class="collaboration-info">
                        <span class="info-tag coach">👨‍💼 Coach sichtbar</span>
                        <span class="info-tag coachee">👤 Coachee sichtbar</span>
                    </div>
                </div>

                <div class="collaboration-content">
                    <div id="collaborationThread" class="message-thread">
                        <div class="initial-message">
                            <p>⏳ Warten auf Coaching-Prompt...</p>
                            <p>Sobald Sie einen Prompt aus dem Coaching-Bereich senden, erscheint er hier für den Coachee.</p>
                        </div>
                    </div>

                    <div class="collaboration-controls">
                        <button onclick="clearCollaboration()" class="btn secondary">🗑️ Thread löschen</button>
                        <button onclick="exportSession()" class="btn secondary">📤 Session exportieren</button>
                        <button onclick="openAvatarTool()" class="btn primary">🎭 Avatar Tool (DelightEx)</button>
                    </div>
                </div>
            </div>

            <!-- TEMPLATES TAB -->
            <div id="templates" class="tab-content">
                <div class="tab-header">
                    <h2>📋 Template Repository</h2>
                    <p>Vorgefertigte Coaching-Templates und Methoden</p>
                </div>

                <div class="templates-grid">
                    <div class="template-card">
                        <h3>🔥 Konfliktklärung</h3>
                        <p>Systematische Bearbeitung von Konfliktsituationen</p>
                        <div class="template-prompts">GT1, GT3, GT4, GT5, GT7, GT9, GT10, GT11</div>
                        <button onclick="loadTemplate('konflikt')" class="btn primary">Template laden</button>
                    </div>

                    <div class="template-card">
                        <h3>🎯 Entscheidungsfindung</h3>
                        <p>Strukturierte Entscheidungsprozesse</p>
                        <div class="template-prompts">GT1, GT2, GT7, GT8, GT9, SF1, GT10, GT11</div>
                        <button onclick="loadTemplate('entscheidung')" class="btn primary">Template laden</button>
                    </div>

                    <div class="template-card">
                        <h3>⚖️ Spannungsfeld-Arbeit</h3>
                        <p>Arbeit mit Polaritäten und Dilemmata</p>
                        <div class="template-prompts">GT4, SF1, DIAG1, LÖS1, META1</div>
                        <button onclick="loadTemplate('spannungsfeld')" class="btn primary">Template laden</button>
                    </div>

                    <div class="template-card">
                        <h3>🚀 Ressourcen-Aktivierung</h3>
                        <p>Stärken und Potentiale mobilisieren</p>
                        <div class="template-prompts">GT8, SF2, SF3, LÖS2, META2</div>
                        <button onclick="loadTemplate('ressourcen')" class="btn primary">Template laden</button>
                    </div>
                </div>
            </div>

        </main>

        <!-- Debug Panel (nur in Development) -->
        <div id="debugPanel" class="debug-panel" style="display: none;">
            <h4>🔧 Debug Panel</h4>
            <div class="debug-info">
                <p>Current Client: <span id="debugClient">None</span></p>
                <p>Current Phase: <span id="debugPhase">1</span></p>
                <p>Session Active: <span id="debugSession">No</span></p>
                <p>Prompts Loaded: <span id="debugPrompts">0</span></p>
            </div>
            <div class="debug-actions">
                <button onclick="validateData()">🔍 Validate Data</button>
                <button onclick="debugCollaborationSync()">🤝 Debug Collaboration</button>
                <button onclick="console.clear()">🗑️ Clear Console</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>